# Skaffold configuration for Cloud Deploy
# Defines how to deploy each service to Kubernetes
apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: mizzou-news-crawler

# Define the services to deploy
build:
  artifacts:
    - image: processor
      docker:
        dockerfile: Dockerfile.processor
    - image: api
      docker:
        dockerfile: Dockerfile.api
    - image: crawler
      docker:
        dockerfile: Dockerfile.crawler

# Deployment manifests - using Kustomize for image substitution
manifests:
  kustomize:
    paths:
      - k8s

# Deploy to Kubernetes
deploy:
  kubectl: {}

# Profiles for different environments (future use)
profiles:
  - name: production
    manifests:
      kustomize:
        paths:
          - k8s
